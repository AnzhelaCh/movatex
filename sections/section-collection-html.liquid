{%- if collection.metafields.custom.html.value != blank -%}
  <div {% render 'section-properties' %}>
      <div class="section-stack">
        {%- render 'section-header'
          , subheading: section.settings.subheading
          , heading: section.settings.title
          , heading_color: section.settings.heading_color
          , heading_gradient: section.settings.heading_gradient
          , content: section.settings.content
          , link_text: section.settings.link_text
          , link_url: section.settings.link_url -%}
      </div>    
    <div class="unhidedtabs">
      {{ collection.metafields.custom.html_unhide.value }}
    </div>
    <div class="contenttabs">
      {{ collection.metafields.custom.html.value }}
    </div >
    <div class="buttontabs">
      {% if shop.locale == 'uk' %}
        <button class="tabsbut" data-showtext="розгорнути" data-hidetext="згорнути">розгорнути</button>
      {% elsif shop.locale == 'ru' %}
        <button class="tabsbut" data-showtext="развернуть" data-hidetext="свернуть">развернуть</button>
      {% elsif shop.locale == 'en' %}
        <button class="tabsbut" data-showtext="read more" data-hidetext="read less">read more</button>
      {% else %}
      {% endif %}
      <script>
        const button = document.querySelector(".tabsbut");
        const content = document.querySelector(".contenttabs");
        button.addEventListener("click", (event) => {
          event.preventDefault();
          const { hidetext, showtext } = event.currentTarget.dataset;
          if (event.currentTarget.textContent === hidetext) {
            event.currentTarget.textContent = showtext;
          } else {
            event.currentTarget.textContent = hidetext;
          }
          content.classList.toggle("auto-width");
        });
      </script>
    </div>
  </div>
{%- endif -%}
{% if collection.url contains 'all' %}
<div {% render 'section-properties' %}>
    <div class="section-stack">
      {%- render 'section-header'
        , subheading: section.settings.subheading
        , heading: section.settings.title
        , heading_color: section.settings.heading_color
        , heading_gradient: section.settings.heading_gradient
        , content: section.settings.content
        , link_text: section.settings.link_text
        , link_url: section.settings.link_url -%}
    </div>
    <div>
      {{ collections['custom-all'].metafields.custom.html.value }}
    </div>
  </div>
{% endif %}
{% schema %}
  {
    "name": "Collection html",
    "class": "shopify-section-collection-html",
    "tag": "section",
    "settings": [
      {
        "type": "header",
        "content": "Colors",
        "info": "Gradient replaces solid colors when set."
      },
      {
        "type": "color",
        "id": "background",
        "label": "Background"
      },
      {
        "type": "color_background",
        "id": "background_gradient",
        "label": "Background gradient"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text"
      }, {
        "type": "color",
        "id": "heading_color",
        "label": "Heading color"
      }, {
        "type": "color_background",
        "id": "heading_gradient",
        "label": "Heading gradient"
      }
    ],
    "presets": [
      {
        "name": "Collection html"
      }
    ]
  }
{% endschema %}